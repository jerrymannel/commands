[
	{
		"id": "utils",
		"title": "Utils",
		"commands": [
			"sudo apt-get update",
			"sudo apt-get install -y apt-transport-https ca-certificates curl net-tools"
		]
	},
	{
		"id": "golang",
		"title": "Golang",
		"commands": [
			"wget https://go.dev/dl/go1.21.4.linux-amd64.tar.gz",
			"rm -rf /usr/local/go && tar -C /usr/local -xzf go1.21.4.linux-amd64.tar.gz",
			"export PATH=$PATH:/usr/local/go/bin",
			"go version"
		]
	},
	{
		"id": "docker",
		"title": "Docker",
		"commands": [
			"curl -fsSL https://get.docker.com -o get-docker.sh",
			"sudo sh get-docker.sh",
			"sudo usermod -aG docker $USER",
			"sudo systemctl daemon-reload",
			"sudo systemctl restart docker"
		],
		"children": [
			{
				"title": "CRI-Dockerd",
				"commands": [
					"git clone https://github.com/Mirantis/cri-dockerd.git",
					"cd cri-dockerd",
					"mkdir bin",
					"go build -o bin/cri-dockerd",
					"mkdir -p /usr/local/bin",
					"sudo install -o root -g root -m 0755 bin/cri-dockerd /usr/local/bin/cri-dockerd",
					"sudo cp -a packaging/systemd/* /etc/systemd/system",
					"sudo sed -i -e 's,/usr/bin/cri-dockerd,/usr/local/bin/cri-dockerd,' /etc/systemd/system/cri-docker.service",
					"sudo systemctl daemon-reload",
					"sudo systemctl enable cri-docker.service",
					"sudo systemctl enable --now cri-docker.socket"
				]
			}
		]
	},
	{
		"id": "kubernetes",
		"title": "Kubernetes",
		"commands": [
			"sudo apt-get update",
			"curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.26/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg",
			"echo 'deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.26/deb/ /' | sudo tee /etc/apt/sources.list.d/kubernetes.list",
			"sudo apt-get update",
			"sudo apt-get install -y kubelet kubeadm kubectl"
		],
		"children": [
			{
				"title": "Optional",
				"commands": [
					"sudo apt-mark hold kubelet kubeadm kubectl"
				]
			},
			{
				"title": "Setup",
				"commands": [
					"sudo systemctl start kubelet",
					"sudo kubeadm init --pod-network-cidr=10.244.0.0/16 --cri-socket=unix:///var/run/cri-dockerd.sock",
					"mkdir -p $HOME/.kube",
					"sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config",
					"sudo chown $(id -u):$(id -g) $HOME/.kube/config",
					"kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml",
					"kubectl taint nodes --all node-role.kubernetes.io/master-"
				]
			}
		]
	},
	{
		"id": "mongodb",
		"title": "MongoDB",
		"commands": [
			"sudo apt-get install gnupg curl",
			"sudo systemctl status mongod",
			"sudo systemctl start mongod",
			"sudo systemctl stop mongod",
			"sudo systemctl restart mongod",
			"replSetName: rs0"
		]
	}
]